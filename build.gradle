apply plugin: 'java'

// Randoop version
version = '2.1.3'

sourceSets {
  systemtest {
    java {
      srcDir 'src/systemtest/java'
    }
    resources {
      srcDir 'src/systemtest/java'
    }
  }
}

// Get what we can from Maven Central
// But, plume.jar dependency is managed manually
repositories {
  mavenCentral()
}

dependencies {
  compile group: 'org.javassist', name: 'javassist', version: '3.+'
  compile files('lib/plume.jar')
  testCompile group: 'junit', name: 'junit', version: '4.+'
}

// Compilation
sourceCompatibility = 1.7
compileJava.options.compilerArgs = ['-Xlint','-g','-Xlint:-classfile']
compileTestJava.options.compilerArgs = ['-nowarn','-g','-Xlint:-classfile']
compileSystemtestJava.options.compilerArgs = ['-nowarn','-g','-Xlint:-classfile']

// Only want the jar file to include class files from main source set
jar {
  from sourceSets.main.output
}

javadoc {
  source sourceSets.main.allJava
}

test {
  workingDir = sourceSets.test.output.resourcesDir
}

// want to archive locally
uploadArchives {
  repositories {
    flatDir {
      dirs 'dist'
    }
  }
}
